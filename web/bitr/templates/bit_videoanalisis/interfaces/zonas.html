{% extends 'base.html' %}

{% block content %}
<section class="container-fluid">
    <!-- Barra de navegación con botones adicionales -->
    <nav class="navbar bg-light py-3 d-flex justify-content-center">
        <h1 class="flex-grow-1 text-center">{% block title %}Análisis de Zona{% endblock %}</h1>
        <div>
            <button class="btn btn-success mx-2" onclick="marcar_evento('ganancia_posesion')">Ganancia de posesión</button>
            <button class="btn btn-danger mx-2" onclick="marcar_evento('perdida_posesion')">Pérdida de posesión</button>
        </div>
    </nav>

    <div class="row justify-content-center mt-5">
        <div class="col-sm-12 text-center position-relative">
            <img src="/static/img/Cancha.png" alt="cancha_rugby" class="img-fluid" style="width: 80%; height: auto;">

            <!-- Botones posicionados sobre la imagen -->
            <button class="btn btn-danger btn-lg position-absolute" onclick="marcar_zona('try_ajeno')" style="top: 50%; left: 15%;">Try</button>
            <button class="btn btn-danger btn-lg position-absolute" onclick="marcar_zona('5_propias')" style="top: 50%; left: 25%;">5</button>
            <button class="btn btn-danger btn-lg position-absolute" onclick="marcar_zona('22_propias')" style="top: 50%; left: 30%;">22</button>
            <button class="btn btn-danger btn-lg position-absolute" onclick="marcar_zona('50_propias')" style="top: 50%; left: 45%;">50</button>
            <button class="btn btn-primary btn-lg position-absolute" onclick="marcar_zona('50_ajenas')" style="top: 50%; left: 55%;">50</button>
            <button class="btn btn-primary btn-lg position-absolute" onclick="marcar_zona('22_ajenas')" style="top: 50%; left: 65%;">22</button>
            <button class="btn btn-primary btn-lg position-absolute" onclick="marcar_zona('5_ajenas')" style="top: 50%; left: 75%;">5</button>
            <button class="btn btn-primary btn-lg position-absolute" onclick="marcar_zona('try_propio')" style="top: 50%; left: 80%;">Try</button>
        </div>
    </div>
</section>

<script>
    function marcar_zona(event) {
        const sesion = "{{sesion}}";
        fetch('/eventos/register_event_noplayer', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ event: event, sesion: sesion })
        })
        .then(response => response.json())
        .then(data => console.log(data))
        .catch(error => console.error('Error:', error));
    }

    function marcar_evento(event) {
        const sesion = "{{sesion}}";
        fetch('/eventos/register_event_noplayer', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ event: event, sesion: sesion })
        })
        .then(response => response.json())
        .then(data => console.log(data))
        .catch(error => console.error('Error:', error));
    }
</script>

{% endblock %}
